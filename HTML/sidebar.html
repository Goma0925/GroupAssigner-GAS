<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style media="screen">
  .yellow{
    background: yellow;
  }

  .blue{
    background: DodgerBlue;
  }

  .red{
    background: red;
  }
  /* The container must be positioned relative: */
  .custom-select {
  position: relative;
  font-family: Arial;
  }

  .custom-select select {
  display: none; /*hide original SELECT element: */
  }

  .select-selected {
    /* background-color: grey; */
  }

  .option-div{
    border-bottom: solid;
  }

  .show{
    display: block;
  }

  .hide{
    display: none;
  }

  /* Style the arrow inside the select element: */
  .+:after {
  position: absolute;
  content: "";
  top: 14px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
  }

  /* Point the arrow upwards when the select box is open (active): */
  .+.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 7px;
  }

  /* style the items (options), including the selected item: */
  .select-items div,.+ {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
  }

  /* Style items (options): */
  .select-items {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
  }

  /* Hide the items when the select box is closed: */
  .select-hide {
  display: none;
  }

  .select-items div:hover, .same-as-selected {
  background-color: rgba(0, 0, 0, 0.1);
  }

  /* Grid layout */
  .grid-container {
    display: grid;
    width: 100%
    grid-row-gap: 50px;
    grid-template-columns: auto auto auto auto auto auto auto auto;
    background-color: #2196F3;
    padding: 10px;
    overflow: auto;
    margin-left: 10px;
    margin-right: 10px;
  }

  .grid-item {
    background-color: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(0, 0, 0, 0.8);
    padding: 20px;
    font-size: 30px;
    text-align: center;
  }
  </style>
</head>
<body>
  <div class="grid-container" id="dropdowns">
      <!-- <div class="grid-item">
        <div class="custom-select" style="width:200px;">
          <select>
            <option value="0">Select car:</option>
            <option value="1">Audi</option>
            <option value="2">BMW</option>
            <option value="3">Citroen</option>
            <option value="4">Ford</option>
            <option value="5">Honda</option>
            <option value="6">Jaguar</option>
            <option value="7">Land Rover</option>
            <option value="8">Mercedes</option>
            <option value="9">Mini</option>
            <option value="10">Nissan</option>
            <option value="11">Toyota</option>
            <option value="12">Volvo</option>
          </select>
        </div>
      </div> -->
    </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
function GLOBAL_DATA(){
  this.colNum;
  this.allMembers = [];
  this.userDictionaryByName = {};
  this.selectedFlagByIndex = [];//allMembersのインデックスから、そのユーザーがすでに選択されているかがわかるようにする
  this.selectMenuData = [];
  this.significanceScale = [];
};
var GLOBAL_DATA = new GLOBAL_DATA();

var PROCESSOR = new Processor();

window.onload = function(){
  // loadData();
  loadTestData();
  initMenuColGrid(".grid-container", GLOBAL_DATA.colNum);
  generateGridItemDivs("#dropdowns", GLOBAL_DATA.allMembers.length, GLOBAL_DATA.colNum);
  generateSelects(".custom-select", GLOBAL_DATA.allMembers, "blue");
  initPulldowns();
};


function loadTestData(){
  var initialData = testData();
  GLOBAL_DATA.colNum = initialData.colNum;
  var user;
  for (var i=0; i<initialData.users.length;i++){
    user = initialData.users[i];
    user.indexInAllMembers = i;
    GLOBAL_DATA.allMembers.push(user);
    GLOBAL_DATA.selectedFlagByIndex[i] = false;
    GLOBAL_DATA.userDictionaryByName[user.name] = user;
  }
  for (var attr in initialData["significanceScale"]){
    GLOBAL_DATA.selectMenuData.push([]);
  };
  GLOBAL_DATA.selectMenuData[0] = initialData.users;
  GLOBAL_DATA.significanceScale = initialData.significanceScale;
  showGlobalData();
};

function showGlobalData(){
  for (var attr in GLOBAL_DATA){
    console.log("GLOBAL["+attr+"]", GLOBAL_DATA[attr]);
  };
}

function loadData(){
  // var element=document.getElementById("trigger_button");
  var initialData;
  //Load data from GAS that reads data from SpreadsheetApp
  // google.script.run
  // .withSuccessHandler(function(jsonStr){
  //   console.log("JSON\n"+jsonStr);
  //   initialData = JSON.parse(jsonStr);
  // })
  // .withFailureHandler(function(err){
  //   alert("データをサーバーからロードできませんでした。Unable to load data from server.");
  //   alert(err);
  // })
  // .getInitialData();
  // GLOBAL_DATA.colNum = initialData.colNum;
  // GLOBAL_DATA.allMembers = initialData.users;
  // GLOBAL_DATA.nonSelectedMembers = initialData.users;
  // var i = 0;
  // for (var attr in initialData["significanceScale"]){
  //   GLOBAL_DATA.selectMenuData.push([]);
  // };
  // GLOBAL_DATA.selectMenuData[0] = initialData.users;
  // GLOBAL_DATA.significanceScale = initialData.significanceScale;
  // for (var attr in GLOBAL_DATA){
  //   console.log("GLOBAL["+attr+"]", GLOBAL_DATA[attr]);
  // };
};

//View
function initMenuColGrid(containerSelector, colNum){
  //カラム数を引数に取り、メニューを囲むコンテナにgrid-template-columnsアトリビュートを設定して、カラム数を決定する。
  var colNumAttr = "";
  for (var i=0; i<=colNum; i++){
    colNumAttr += "auto ";
  };
  $(containerSelector).css("grid-template-columns", colNumAttr);
}

//View
function generateGridItemDivs(containerSelector, memberNum, colNum){
  // Select要素を入れるDivを生成する関数。一列目のヘッダも生成する
  // containerSelector: プルダウンを入れるdivコンテナのセレクタ
  // memberNum: メンバーの数＝プルダウンを作成する数
  for (var i=0; i<=colNum; i++){
    var header;
    if (i==0){
      header= '<div class="grid-item grid-header-empty"></div>'
    }else{
      header= '<div class="grid-item grid-header">Group'+(i)+'</div>'
    }
    $(containerSelector).append(header);
  }
  //Create divs for 1) Row numbers 2)Select containers
  var rowIndex = 0;
  var colIndex = 0;
  for (var i=0; i<memberNum+colNum;i++){
    if (i%(colNum+1) == 0){
      //Create a row number div
      var cellNumberDiv = '<div class="grid-item">'+(rowIndex+1)+'</div>'
      $(containerSelector).append(cellNumberDiv);
      rowIndex++;
      colIndex = 0;
    }else{
      //Crete select container
      var gridItem = '<div class="grid-item"><div class="custom-select row-'+rowIndex+' column-'+colIndex+' style="width:200px;"></div></div>'
      $(containerSelector).append(gridItem);
      colIndex+=1;
    };
  };
};

//View
function generateSelects(parentSelector, members, divColorClass){
  //Generate select elements for all cells(divs)
  var $selectContainerDivs = $(parentSelector);
  var optionElements = '<option value="none"> ----- </option>';
  var optionElement;
  for (var i=0; i<members.length; i++){
    optionElement = '<option value="'+members[i].name+'" class="'+divColorClass+' option-div show">'+members[i].name+"</option>";
    optionElements += optionElement;
  };
  var child = document.createElement("p");
  $selectContainerDivs.append("<select></select>").children('select').append(optionElements);
};

//View
// ----------------Pull down scripts bellow-----------------
function initPulldowns(){
  var x, i, j, selElmnt, selectEleClass, selectedDiv, selectHiddenDiv, selectOptionDiv;
  var selectedDivStyleClass = "blue"
  /* Look for any elements with the class "custom-select": */
  x = document.getElementsByClassName("custom-select");
  for (i = 0; i < x.length; i++) {
    selElmnt = x[i].getElementsByTagName("select")[0];
    /* For each element, create a new DIV that will act as the selected item: */
    selectedDiv = document.createElement("DIV");
    selectedDiv.setAttribute("class", "select-selected "+ selectedDivStyleClass);
    selectedDiv.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
    x[i].appendChild(selectedDiv);
    /* For each element, create a new DIV that will contain the option list: */
    selectHiddenDiv = document.createElement("DIV");
    selectHiddenDiv.setAttribute("class", "select-items select-hide");
    for (j = 1; j < selElmnt.length; j++) {
      /* For each option in the original select element,
      create a new DIV that will act as an option item: */
      selectOptionDiv = document.createElement("DIV");
      selectOptionDiv.innerHTML = selElmnt.options[j].innerHTML;
      selectOptionDiv.setAttribute("class", selElmnt.options[j].getAttribute("class"));
      selectOptionDiv.addEventListener("click", function(e) {
          /* When an item is clicked, update the original select box,
          and the selected item: */
          var y, i, k, selectEle, h;
          var thisSelectedDiv = this;
          selectEle = this.parentNode.parentNode.getElementsByTagName("select")[0];
          selectEleClass = selectEle.getAttribute("class");
          h = this.parentNode.previousSibling;
          for (i = 0; i < selectEle.length; i++) {
            if (selectEle.options[i].innerHTML == this.innerHTML) {
              selectEle.selectedIndex = i;
              selectEle.value = selectOptionDiv.innerHTML;
              h.innerHTML = this.innerHTML;
              previouslySelectedDiv = this.parentNode.getElementsByClassName("same-as-selected");
              for (k = 0; k < previouslySelectedDiv.length; k++) {
                previouslySelectedDiv[k].classList.remove("same-as-selected");
              }
              this.setAttribute("class", this.getAttribute("class")+" same-as-selected");
              break;
            }
          }
          h.click();
          console.log("selected");
          setTimeout(function(){updateMemberDataInColumn(thisSelectedDiv);}, 1000);
      });
      selectHiddenDiv.appendChild(selectOptionDiv);
    }
    x[i].appendChild(selectHiddenDiv);
    selectedDiv.addEventListener("click", function(e) {
      /* When the select box is clicked, close any other select boxes,
      and open/close the current select box: */
      console.log("open");
      e.stopPropagation();
      this.nextSibling.classList.toggle("select-hide");
      this.classList.toggle("select-arrow-active");
      closeAllSelect(this, this.parent);
      // var selectedGroupMembers = getSelectedMemberInCol(clickedColIndex);
      //Process and get available members to select from.

      //Show the avalable members color coded.

      //NEXT: ここのグループメンバー取得処理を入れる
    });
  }
};


function closeAllSelect(elmnt) {
  /* A function that will close all select boxes in the document,
  except the current select box: */
  var selectedDivClassAttrList,className,colIndex;
  //close all select boxes
  var x, y, i, arrNo = [];
  x = document.getElementsByClassName("select-items");
  y = document.getElementsByClassName("select-selected");
  // selectContainerDiv = x.parent;
  for (i = 0; i < y.length; i++) {
    if (elmnt == y[i]) {
      arrNo.push(i)
    } else {
      y[i].classList.remove("select-arrow-active");
    }
  }
  for (i = 0; i < x.length; i++) {
    if (arrNo.indexOf(i)) {
      x[i].classList.add("select-hide");
    }
  };
}
/* If the user clicks anywhere outside the select box,
then close all select boxes: */
document.addEventListener("click", closeAllSelect);

//View
function getClickedColumnIndex(sameAsSelectedDiv){
  var colIndex;
  var selectedDivClassAttrList = sameAsSelectedDiv.parentNode.parentNode.classList;
  for (var i=0; i<selectedDivClassAttrList.length;i++){
    className = selectedDivClassAttrList[i];
    if (className.includes("column-")){
      colIndex = className.split("-")[1];
    }
    console.log("getClickedColumnNum:", colIndex);
  };
  return colIndex;
}

//View
function getSelectedMembersInColumn(colIndex) {
  //選択されたDivをもとに、そのColunで選択されているすべてのメンバーをオブジェクトで取得する。
  //Complete
  var targetSelects;
  var selectedMemberObjs = [];
  targetSelectContainers = document.getElementsByClassName("column-"+colIndex);
  //indicesToHideDivs = 選択肢に表示したくないメンバーのインデックス
  var selectedMemberName, selectedMemberObj, indicesToHideDivs;
  for (var i=0; i<targetSelectContainers.length; i++){
    selectedMemberName = $(targetSelectContainers[i]).children(".select-selected").get(0).innerText;
    markAsSelected(selectedMemberName);
    selectedMemberObj = GLOBAL_DATA.userDictionaryByName[selectedMemberName];
    if (typeof(selectedMemberObj) !== "undefined"){
      selectedMemberObjs.push(selectedMemberObj);
    }
  };
  return selectedMemberObjs;
};

function getNonSelectedMembersOutOfAll(){
  //選択されてないメンバーを全てオブジェクトで抽出する
  var nonSelectedMembersOutOfAll = []
  for (var i=0; i<GLOBAL_DATA.selectedFlagByIndex.length;i++){
    if (GLOBAL_DATA.selectedFlagByIndex[i]　== false){
      nonSelectedMembersOutOfAll.push(GLOBAL_DATA.allMembers[i]);
    }
  };
  console.log("nonSelectedMembersOutOfAll", nonSelectedMembersOutOfAll);
  return nonSelectedMembersOutOfAll;
}

//ロジックのメイン関数 - Model
function updateMemberDataInColumn(sameAsSelectedDiv){
  //各セルの、選択メニューのオプション(sameAsSelectedDiv)が選択された時に、プロセッサーを起動して、attribute重複のないメンバーを割り出すロジックを起動する
  //そして、それぞれのdiv optionを更新する
  //1. 同じColumnで選択されているuserオブジェクトを取得
  var clickedColIndex, preSelectedMembersInCol, nonSelectedMembersOutOfAll;
  clickedColIndex = getClickedColumnIndex(sameAsSelectedDiv);
  //2. GLOBAL_DATAへ、選択済みのMemberを記録 & そのColumn(Group)のpreSelectedMembersを取得
  preSelectedMembersInCol = getSelectedMembersInColumn(clickedColIndex);
  nonSelectedMembersOutOfAll = getNonSelectedMembersOutOfAll();

  //3. ProcessorからavailableMembers(残っていて選択可能なメンバーを最適度順に分けたもの) - NEXTWORK
  // var result = PROCESSOR.getNonMatchMembers(nonSelectedMembersOutOfAll, preSelectedMembersInCol, GLOBAL_DATA.significanceScale);
  //DELETE this in production
  groupedNonMatchMembers = TestNonMatchMemers();//2D array

  //3. Viewへの更新をおこなう
  updateSelectOptionDiv(groupedNonMatchMembers, clickedColIndex)

  //availableMembersをdivsに反映する。availableMembersだけを表示する

};

function updateSelectOptionDiv(groupedNonMatchMembers, targetColumnToUpdate){
  console.log("updateSelectOptionDiv");
  //Arg: groupedNonMatchMembers - 2D array. 残っている選択可能なメンバーを最適度順に分けたもの.　Processorのアウトプット
  targetSelectContainers = document.getElementsByClassName("column-"+targetColumnToUpdate);
  //indicesToHideDivs = 選択肢に表示したくないメンバーのインデックス
  var optionDivContainers = $(targetSelectContainers).children(".select-items");
  var optionDivs, nonMatchMember;
  console.log("optionDivContainers", optionDivContainers);

  optionDivContainers.each(function(optionDivContainerIndex, optionDivContainer){
    console.log("optionDivContainer-each", optionDivContainer);
    optionDivs = $(optionDivContainer).children(".option-div");
    var indexInAllMembers = 0;
      //GLOBAL_DATA.llMembersとHTML上のメンバーデータ並び順が同じことを利用して、表示・非表示を切り替える。
      optionDivs[indexInAllMembers].classList.toggle("show");
      optionDivs[indexInAllMembers].classList.toggle("hide");
      //WORKNEXT: optionDivに色付け & groupedNonMatchMembersをループして、indexInAllMembersを取得する
  });
};


//Model
function markAsSelected(userName){
  //指定されたuser nameをGLOBAL_DATAないで、選択済みにする
  var user = GLOBAL_DATA.userDictionaryByName[userName];
  if (typeof(user) !== "undefined"){
    GLOBAL_DATA.selectedFlagByIndex[user.indexInAllMembers] = true;
  };
};

//Model
function getColorCodeForOptimalLevel(optimalLevel){
  //プルダウンにメンバーを表示する際に、最適度別に色を変える用の色コードを返す関数。0を含む整数を引数に取り、HTMLの色コードを返す
  //optiomalLevel = 0を含む整数を引数に取り
  var colorClass = ["blue", "yellow", "red"];
  if (optiomalLevel >= colorClass.length){
    return "no-color";
  };
}


function testData(){
  data = '{"colNum":10,"users":[{"id":"1","name":"Yuna Mizutani","profile":{"board":"Yes","department":"執行局","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"3","name":"Nao Tanaka","profile":{"board":"Yes","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"9","name":"Manami Oyobe","profile":{"board":"Yes","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"10","name":"Tomoki Yasuda","profile":{"board":"Yes","department":"戦略策定局","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"11","name":"Ryugo Shimamura","profile":{"board":"Yes","department":"CEO","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"12","name":"Shin Taniyoshi","profile":{"board":"Yes","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"13","name":"Kohta Shimada","profile":{"board":"Yes","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"14","name":"Mito Nishioka","profile":{"board":"Yes","department":"財務局","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"15","name":"Nichina Matsuzaki","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"18","name":"Hiro Tomita","profile":{"board":"Yes","department":"執行局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"19","name":"Shiori Tazaki","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"20","name":"Yuta Tani","profile":{"board":"Yes","department":"戦略策定局","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"21","name":"Seri Morikawa","profile":{"board":"Yes","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"22","name":"Kohki Arikawa","profile":{"board":"Yes","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"23","name":"Go Ogata","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"24","name":"Adachi Hikaru","profile":{"board":"Yes","department":"執行局","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"25","name":"Mahiro Shimizu","profile":{"board":"Yes","department":"プログラム室","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"26","name":"Amon Otsuki","profile":{"board":"Yes","department":"戦略策定局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"27","name":"Suono Fujii","profile":{"board":"Yes","department":"プログラム室","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"28","name":"Hazuki Nishioka","profile":{"board":"Yes","department":"財務局","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"29","name":"Yui Naito","profile":{"board":"Yes","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"30","name":"Keitaro Nishijima","profile":{"board":"No","department":"財務局","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"31","name":"Rie Shiomitsu","profile":{"board":"No","department":"戦略策定局（IT）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"32","name":"Misaki Chada","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"0","non-STEM":"0"}},{"id":"33","name":"Rio Yamamoto","profile":{"board":"No","department":"財務局","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"34","name":"Hikaru Mizuta","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"35","name":"Shoki Shigemoto","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"36","name":"Ziying An","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"37","name":"Kodai Maki","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"38","name":"Akiko Takeda","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Tokushima","sex":"0","non-STEM":"0"}},{"id":"39","name":"Enya Toyama","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"40","name":"Arashi Katsuda","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"41","name":"Kenta Yoshii","profile":{"board":"No","department":"財務局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"42","name":"Shiori Yamada","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"43","name":"Masami Kudo","profile":{"board":"No","department":"広報局（イベント）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"44","name":"Risa Furuya","profile":{"board":"No","department":"広報局（イベント）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"45","name":"Hiromu Tanakai","profile":{"board":"No","department":"広報局（写真）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"46","name":"Akari Nishida","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"47","name":"Hidetaka Kawada","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"48","name":"Kaita Yamada","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"49","name":"Yumeka Tanabe","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"50","name":"Katsutoshi Hori","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"51","name":"Akira To","profile":{"board":"No","department":"戦略策定局（IT）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"52","name":"Naotoshi Tani","profile":{"board":"No","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"53","name":"Sachiko Yamaguchi","profile":{"board":"No","department":"人事局（高校生対応）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"54","name":"Maho Fujimoto","profile":{"board":"No","department":"広報局（イベント）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"55","name":"Sae kawakami","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"56","name":"takahi Ni","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"57","name":"Miyu Yamanaka","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"58","name":"Nao Kuno","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"59","name":"Tatsuya Inomata","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"60","name":"Ryoga Tsukamoto","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"61","name":"Yuta Inukai","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"62","name":"Hugo Ichioka","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"63","name":"Tatuwaki Nakagawa","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"64","name":"Ryuichiro Sonoda","profile":{"board":"No","department":"財務局","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"65","name":"Yuxiang Weng","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"66","name":"Hinako Nakamura","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"67","name":"Toi Kaifu","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"68","name":"Yuka Inomata","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"69","name":"Ryoya Yamamoto","profile":{"board":"No","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"70","name":"Saki Tanii","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"0","non-STEM":"0"}},{"id":"71","name":"Himeka Watanabe","profile":{"board":"No","department":"広報局（イベント）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"72","name":"Koyomi Taguchi","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"73","name":"Yuki Ushida","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"74","name":"Hanna Kawasaki","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"75","name":"Tomoaki Ban","profile":{"board":"No","department":"広報局（メディア）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"76","name":"Riku Smriga","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"77","name":"Keito Ono","profile":{"board":"No","department":"広報局（映像）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"78","name":"Kyosuke Kikuchi","profile":{"board":"No","department":"人事局（高校生対応）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"79","name":"Keitaro Mochizuki","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"80","name":"Tomoshi Ishida","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"81","name":"Naoto Okuyama","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"82","name":"Kanako Yamagami","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"83","name":"Yusuke Nakamura","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"84","name":"Kahi Sugata","profile":{"board":"No","department":"広報局（メディア）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"85","name":"Yoshiki Masuda","profile":{"board":"No","department":"戦略策定局（IT）","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"86","name":"Ryunosuke Hirata","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"87","name":"Makita Yoshihiro","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"88","name":"Shotaro Hiranuma","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"89","name":"Chiemi Yoshida","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"90","name":"Yukari Kawasaki","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"91","name":"Sasha Fukumoto","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"92","name":"Ao Sasaki","profile":{"board":"No","department":"財務局","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"93","name":"Mioko Fukuda","profile":{"board":"No","department":"広報局（メディア）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"94","name":"Yuji Ishikawa","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"95","name":"Mano Fukui","profile":{"board":"No","department":"NO_DEPARTMENT","region":"","sex":"0","non-STEM":"1"}},{"id":"95","name":"Haruka Yasuda","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"96","name":"Yu Uemura","profile":{"board":"No","department":"広報局（メディア）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"97","name":"Yuta Hikoso","profile":{"board":"No","department":"NO_DEPARTMENT","region":"","sex":"1","non-STEM":"1"}},{"id":"97","name":"Takae Arasaki","profile":{"board":"No","department":"広報局（映像）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"98","name":"Mayu Kawada","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"99","name":"Mayu Takahata","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}}],"significanceScale":["board","department","region","sex","non-STEM"]}';
  return JSON.parse(data);
};

function TestNonMatchMemers(){
  data = '{"nonMatchMembers":[[{"id":"1","name":"Yuna Mizutani","profile":{"board":"Yes","department":"執行局","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"3","name":"Nao Tanaka","profile":{"board":"Yes","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"9","name":"Manami Oyobe","profile":{"board":"Yes","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"10","name":"Tomoki Yasuda","profile":{"board":"Yes","department":"戦略策定局","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"11","name":"Ryugo Shimamura","profile":{"board":"Yes","department":"CEO","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"20","name":"Yuta Tani","profile":{"board":"Yes","department":"戦略策定局","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"21","name":"Seri Morikawa","profile":{"board":"Yes","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"22","name":"Kohki Arikawa","profile":{"board":"Yes","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"23","name":"Go Ogata","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"24","name":"Adachi Hikaru","profile":{"board":"Yes","department":"執行局","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"25","name":"Mahiro Shimizu","profile":{"board":"Yes","department":"プログラム室","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"26","name":"Amon Otsuki","profile":{"board":"Yes","department":"戦略策定局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"27","name":"Suono Fujii","profile":{"board":"Yes","department":"プログラム室","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"28","name":"Hazuki Nishioka","profile":{"board":"Yes","department":"財務局","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"29","name":"Yui Naito","profile":{"board":"Yes","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"30","name":"Keitaro Nishijima","profile":{"board":"No","department":"財務局","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"31","name":"Rie Shiomitsu","profile":{"board":"No","department":"戦略策定局（IT）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"32","name":"Misaki Chada","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"0","non-STEM":"0"}},{"id":"33","name":"Rio Yamamoto","profile":{"board":"No","department":"財務局","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"34","name":"Hikaru Mizuta","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"35","name":"Shoki Shigemoto","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"36","name":"Ziying An","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"37","name":"Kodai Maki","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"38","name":"Akiko Takeda","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Tokushima","sex":"0","non-STEM":"0"}},{"id":"39","name":"Enya Toyama","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"40","name":"Arashi Katsuda","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"41","name":"Kenta Yoshii","profile":{"board":"No","department":"財務局","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"42","name":"Shiori Yamada","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"43","name":"Masami Kudo","profile":{"board":"No","department":"広報局（イベント）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"44","name":"Risa Furuya","profile":{"board":"No","department":"広報局（イベント）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"45","name":"Hiromu Tanakai","profile":{"board":"No","department":"広報局（写真）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"46","name":"Akari Nishida","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"47","name":"Hidetaka Kawada","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"48","name":"Kaita Yamada","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"49","name":"Yumeka Tanabe","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"50","name":"Katsutoshi Hori","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"51","name":"Akira To","profile":{"board":"No","department":"戦略策定局（IT）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"52","name":"Naotoshi Tani","profile":{"board":"No","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"53","name":"Sachiko Yamaguchi","profile":{"board":"No","department":"人事局（高校生対応）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"54","name":"Maho Fujimoto","profile":{"board":"No","department":"広報局（イベント）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"55","name":"Sae kawakami","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"56","name":"takahi Ni","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"57","name":"Miyu Yamanaka","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"58","name":"Nao Kuno","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"59","name":"Tatsuya Inomata","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"60","name":"Ryoga Tsukamoto","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"61","name":"Yuta Inukai","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"62","name":"Hugo Ichioka","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"63","name":"Tatuwaki Nakagawa","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"64","name":"Ryuichiro Sonoda","profile":{"board":"No","department":"財務局","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"65","name":"Yuxiang Weng","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"66","name":"Hinako Nakamura","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"67","name":"Toi Kaifu","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"68","name":"Yuka Inomata","profile":{"board":"No","department":"プログラム室","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"69","name":"Ryoya Yamamoto","profile":{"board":"No","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"70","name":"Saki Tanii","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"0","non-STEM":"0"}},{"id":"71","name":"Himeka Watanabe","profile":{"board":"No","department":"広報局（イベント）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"72","name":"Koyomi Taguchi","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"73","name":"Yuki Ushida","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"74","name":"Hanna Kawasaki","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Obuse","sex":"0","non-STEM":"1"}},{"id":"75","name":"Tomoaki Ban","profile":{"board":"No","department":"広報局（メディア）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"76","name":"Riku Smriga","profile":{"board":"No","department":"人事局（高校生対応）","region":"Obuse","sex":"1","non-STEM":"0"}},{"id":"77","name":"Keito Ono","profile":{"board":"No","department":"広報局（映像）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"78","name":"Kyosuke Kikuchi","profile":{"board":"No","department":"人事局（高校生対応）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"1"}},{"id":"79","name":"Keitaro Mochizuki","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Obuse","sex":"1","non-STEM":"1"}},{"id":"80","name":"Tomoshi Ishida","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"81","name":"Naoto Okuyama","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"82","name":"Kanako Yamagami","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"83","name":"Yusuke Nakamura","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"84","name":"Kahi Sugata","profile":{"board":"No","department":"広報局（メディア）","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"85","name":"Yoshiki Masuda","profile":{"board":"No","department":"戦略策定局（IT）","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"86","name":"Ryunosuke Hirata","profile":{"board":"No","department":"人事局（高校生対応）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"87","name":"Makita Yoshihiro","profile":{"board":"No","department":"戦略策定局（大学生研修）","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"88","name":"Shotaro Hiranuma","profile":{"board":"No","department":"プログラム室","region":"Tokushima","sex":"1","non-STEM":"0"}},{"id":"89","name":"Chiemi Yoshida","profile":{"board":"No","department":"人事局（海外大学生対応）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"90","name":"Yukari Kawasaki","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"91","name":"Sasha Fukumoto","profile":{"board":"No","department":"戦略策定局（コミュニティマネジメント）","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"92","name":"Ao Sasaki","profile":{"board":"No","department":"財務局","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"93","name":"Mioko Fukuda","profile":{"board":"No","department":"広報局（メディア）","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}},{"id":"94","name":"Yuji Ishikawa","profile":{"board":"No","department":"広報局（クリエイティブ）","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"95","name":"Mano Fukui","profile":{"board":"No","department":"NO_DEPARTMENT","region":"","sex":"0","non-STEM":"1"}},{"id":"95","name":"Haruka Yasuda","profile":{"board":"No","department":"プログラム室","region":"Tokyo","sex":"0","non-STEM":"1"}},{"id":"96","name":"Yu Uemura","profile":{"board":"No","department":"広報局（メディア）","region":"Tokyo","sex":"1","non-STEM":"1"}},{"id":"97","name":"Yuta Hikoso","profile":{"board":"No","department":"NO_DEPARTMENT","region":"","sex":"1","non-STEM":"1"}},{"id":"97","name":"Takae Arasaki","profile":{"board":"No","department":"広報局（映像）","region":"Tokyo","sex":"1","non-STEM":"0"}},{"id":"98","name":"Mayu Kawada","profile":{"board":"No","department":"プログラム室","region":"Miyagi-Onagawa","sex":"0","non-STEM":"1"}}],[{"id":"12","name":"Shin Taniyoshi","profile":{"board":"Yes","department":"プログラム室","region":"Miyagi-Onagawa","sex":"1","non-STEM":"0"}},{"id":"13","name":"Kohta Shimada","profile":{"board":"Yes","department":"財務局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"14","name":"Mito Nishioka","profile":{"board":"Yes","department":"財務局","region":"Miyagi-Onagawa","sex":"0","non-STEM":"0"}},{"id":"15","name":"Nichina Matsuzaki","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Tokushima","sex":"0","non-STEM":"1"}},{"id":"18","name":"Hiro Tomita","profile":{"board":"Yes","department":"執行局","region":"Tokushima","sex":"1","non-STEM":"1"}},{"id":"19","name":"Shiori Tazaki","profile":{"board":"Yes","department":"広報・マーケティング局","region":"Obuse","sex":"0","non-STEM":"1"}}]]}'
  return JSON.parse(data).nonMatchMembers;
}

function Processor(){
  this.getNonMatchMembers = function(allMembersLeft, preSelectedMembers, significanceScale){
    // params:
    // allMembers: List[Person, Person]
    // preSelectedMembers:  List[Person, Person]
    // significance:  List[String, String]  インデックス0が一番重要なデータ項目の見出しString
    // Person class signiture example: {name: "Yoshiki", user_id:"3", profile:{department:"戦略策定室",...}}
    // 1. 全属性がマッチしない人を探す
    var tempAllMembersLeft = allMembersLeft; //copying so that we don't change the original

	var nonMatchMembers = []; //we return this in the end
  var attr;
  var person;
	for(var i=0; i<significanceScale.length;i++){
    attr = significanceScale[i];
		for(var i=0; i<preSelectedMembers.length;i++){
			var tempArray = [];
			tempArray.push(person["profile"][attr]);
		}

		var existingCharacteritics = tempArray.filter(onlyUnique); //taking out distinct existing characteristics in a row

		var nonMatched = []; //次のステージに進める人たち
		var matched = []; //fall out組

		for(var i= person in tempAllMembersLeft){

			if(existingCharacteritics.includes(person["profile"][attr])){ //if the characteristic is already selected in the same row
				matched.push(person);
			}

			else{
				nonMatched.push(person);
			}

		}

		tempAllMembersLeft = nonMatched;
		nonMatchMembers.unshift(matched);

	}

	nonMatchMembers.unshift(tempAllMembersLeft); //１つもattrが被ってない奇跡組をpush

	return nonMatchMembers
    //!!!!実装前に読んでほしい(byあもん)!!!!
    //getNonMatchMembers()の返り値は、単純なarrayじゃなくて、2D arrayにしてもらえる？
    //例)
    // [[全てのattributeがマッチしなかったメンバー],
    //  [一つを除いてattributeがマッチしなかったメンバー],
    //  [2つを除いてattributeがマッチしなかったメンバー]]
    //→ つまり毎回必ず、全パターンの処理をする。(全属性がマッチしない人、一つを除いてマッチしないひと、2つを除いてマッチしない人...)
    // こうするとスプシで表示するときに柔軟性をもたせられるので！
    //
    //　独り言: 計算量がなかなかすごいことになりそうなので、動的プログラミング(Dynamic Programming)&再起定義(Recursion)
    // をつかって実装できたらそうしてほしいかも...Not mustだけど！



    //return [[Person, Person], [Person, Person],...] 2D array
  };

  this.onlyUnique = function(value, index, self) {
    	return self.indexOf(value) === index;
  };

};


</script>
</html>

<!-- NEXT -->
<!-- ブラウザが重くなって止まる問題 -->
<!-- selectがクリックされたらそのグループのメンバーしゅとくする処理実装 ー getSelectedMemberInCol-->
